- View processes running in current terminal session
  ```bash
    ps
  ```
- Give an overview of the columns
    ```
    PID TTY          TIME CMD
    1796 pts/0    00:00:00 zsh
    1856 pts/0    00:00:00 ps
    ```
  - **PID:** Process ID - unique identifier assigned by the kernel to each process sequentially as they are created.
  - **TTY:** Terminal associated with the process.
  - **TIME:** CPU time consumed by the process.
  - **CMD:** Command/name of the process.

- View all processes running on the system for all users
  ```bash
    ps aux
  ```
  - Note: Options are not prefixed with a dash (`-`) and must be lowercase (Linux is case-sensitive).
- Provide an overview of the process columns.
    ```
        USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
        root           1  0.3  0.3  23680 14364 ?        Ss   02:26   0:01 /sbin/init splash
        root           2  0.0  0.0      0     0 ?        S    02:26   0:00 [kthreadd]
    ```
  - **USER:** The user who invoked the process.
  - **PID:** The process ID.
  - **%CPU:** The percent of CPU this process is using.
  - **%MEM:** The percent of memory this process is using.
  - **VSZ (Virtual Memory Size):**
      - Total amount of virtual memory the process is using, measured in kilobytes (KB).
      - Includes all memory the process *can* access:
        - Memory that is swapped out to disk.
        - Memory that is allocated but not yet used.
        - Memory from shared libraries.
      - Does **not** represent actual physical RAM usage.
      - A process can have a large VSZ but use very little physical memory.
      - Example: A process with `202540` VSZ has ~202 MB of virtual address space allocated.
  - **RSS (Resident Set Size):**
      - The portion of memory that is actually held in physical RAM, measured in kilobytes (KB).
      - Represents the **real** memory footprint of the process.
      - Does **not** include:
        - Memory that has been swapped out to disk.
      - Does include:
        - Shared libraries currently loaded in memory (may be shared with other processes).
      - More accurate indicator of actual memory consumption than VSZ.
      - Example: A process with `6396` RSS is using ~6.4 MB of physical RAM.
  - **TTY:** Terminal type (`?` means no terminal attached).
  - **STAT (Process State):**
    - Shows the current state of the process using code letters.
    - **Primary state codes (first character):**
      - `R` -> Running or runnable (actively executing or in run queue).
      - `S` -> Interruptible sleep (waiting for an event, like user input).
      - `D` -> Uninterruptible sleep (usually waiting for I/O operations).
      - `T` -> Stopped (suspended by job control signal or debugger).
      - `Z` -> Zombie (terminated but parent hasn't collected exit status).
      - `I` -> Idle kernel thread.
    - **Additional modifier characters:**
      - `<` -> High priority process (not nice to other processes).
      - `N` -> Low priority process (nice to other processes).
      - `L` -> Has pages locked into memory (cannot be swapped).
      - `s` -> Session leader (controls a group of processes).
      - `l` -> Multi-threaded process.
      - `+` -> In the foreground process group of the terminal.
    - Example: `Ss` means sleeping (`S`) and is a session leader (`s`).
    - Example: `R+` means running (`R`) and in the foreground (`+`).
  - **START:** Time the process started.
  - **TIME:** CPU time consumed.
  - **COMMAND:** The name of the command that started the process.

- Why is the PID more important than the process name?
  - The Linux kernel assigns a unique **PID** to each process sequentially as processes are created.
  - When working with processes in Linux, you often need to specify their PIDs to perform any action on a process.
  - To perform any action on a process, we must specify its PID.
- Start the Metasploit exploitation framework
  ```bash
    msfconsole
  ```
  - Metasploit is the most widely used exploitation framework.
  - Comes pre-installed on Kali Linux.
  - Uses PostgreSQL database as its backend.

- Filter processes by name to find a specific process (e.g., `msfconsole`)
  ```bash
    ps aux | grep msfconsole
  ```
  - **Important notes:**
    - Column headers are **not** displayed because they don't contain the search keyword.
    - The `grep` command itself will appear in the results since it contains the search term.
    - Results maintain the same column format as `ps aux`.

- Understanding filtered process output
    ```bash
        kali       16265 30.3  7.4 1321004 298144 pts/0  Sl+  02:59   0:16 ruby /usr/bin/msfconsole
        kali       16720  0.0  0.0   2684  1652 pts/0    S+   03:00   0:00 sh -c ps aux | grep msfconsole
        kali       16722  0.0  0.0   6532  2292 pts/0    S+   03:00   0:00 grep msfconsole
    ```
  - **Key columns for resource monitoring:**
    - **%CPU (3rd column):** Percentage of CPU the process is consuming.
    - **%MEM (4th column):** Percentage of system memory the process is using.
- Exclude `grep` from the search results
  ```bash
    ps aux | grep msfconsole | grep -v grep
  ```
  - The `-v` option inverts the match, excluding lines containing `grep`.
- Find the most resource-intensive processes (greediest processes)
  ```bash
    top
  ```
  - Unlike `ps` which gives a one-time snapshot, `top` refreshes the list dynamically (default: every 10 seconds).
  - Processes are displayed ordered by resource usage, starting with the largest consumers.
- **Header information displayed:**
    ```
        top - 03:18:14 up 51 min,  1 user,  load average: 0.03, 0.05, 0.09
        Tasks: 163 total,   1 running, 162 sleeping,   0 stopped,   0 zombie
        %Cpu(s):  4.6 us,  3.6 sy,  0.0 ni, 91.6 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st 
        MiB Mem :   3921.9 total,   2319.2 free,    873.2 used,    988.5 buff/cache     
        MiB Swap:    953.7 total,    953.7 free,      0.0 used.   3048.8 avail Mem 
    ```
  - System uptime and number of users logged in.
  - **Tasks:** Total processes and their states (running, sleeping, stopped, zombie).
  - **%Cpu(s):** CPU usage breakdown (`us` = user, `sy` = system, `ni` = nice, `id` = idle, `wa` = wait, `hi` = hardware interrupts, `si` = software interrupts).
  - **KiB Mem:** Physical memory usage (total, free, used, buff/cache).
  - **KiB Swap:** Swap memory usage (total, free, used, available).
- **Process columns:**
    ```bash
      PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                                                                                                                              
    725 root      20   0  378896 127672  59792 S  11.3   3.2   0:38.83 Xorg                                                                                                                                                                 
   1605 kali      20   0  584784  68812  53532 S   5.0   1.7   0:04.99 qterminal                                                                                                                                                            
   1345 kali      20   0  895700 132308  83680 S   1.3   3.3   0:10.96 xfwm4      
    ```
    - **PID:** Process ID.
    - **USER:** User who owns the process.
    - **PR:** Priority of the process.
    - **NI:** Nice value (affects scheduling priority; lower = higher priority).
    - **VIRT:** Virtual memory used by the process (same as VSZ in `ps`).
    - **RES:** Resident memory (physical RAM used, same as RSS in `ps`).
    - **SHR:** Shared memory size.
    - **S:** Process state (`R` = running, `S` = sleeping, `D` = uninterruptible sleep, `Z` = zombie, `T` = stopped).
    - **%CPU:** Percentage of CPU usage.
    - **%MEM:** Percentage of memory usage.
    - **TIME+:** Total CPU time consumed by the process.
    - **COMMAND:** Name of the command/process.

- Interactive commands while `top` is running
  - `H` or `?` -> Display a list of interactive commands (help).
  - `Q` -> Quit `top`.

- Use case for `top`
  - System administrators often keep `top` running in a terminal to continuously monitor process resource usage.
  - Hackers may use it to monitor multiple tasks running on their system simultaneously.

- What does `nice` command do?
  - The `nice` command suggests priority adjustments to the kernel when starting a process.
- What is the range of the `nice` value?
  - **Nice Value Range:** -20 (highest priority) to +19 (lowest priority), with 0 as default.
  - **Increment Value:** The `-n` option specifies how much to adjust from the default (0).
    - Positive values (e.g., 10) → Lower priority (more "nice" to others)
    - Negative values (e.g., -10) → Higher priority (less "nice" to others)
- What does a user need **Root** priviledge to perform to set nice value?
  - **Root Privileges:** Required to set negative nice values (increase priority).
  - Regular users can only increase nice values (lower priority) for their own processes.
- Syntax for staring a process with a specified nice value (priority adjustment)
  ```bash
    nice -n 10 <command>
  ```
- Change the nice value of an already running process
  ```bash
    renice -n 5 -p <PID>
  ```
  - The `renice` command changes the priority of a running process using an absolute nice value.
  - **Absolute Value:** The `-n` option sets the exact nice value (5 in this example).
  - **PID:** The `-p` option specifies the target process ID.
  - Root can set any nice value (-20 to +19) for any process.
  - Regular users can only increase nice values (lower priority) for their own processes.

- Understanding nice values and process priority
  - **High Priority:** Low nice value (e.g., -20) - Less "nice," consumes more resources
  - **Low Priority:** High nice value (e.g., +19) - More "nice," consumes fewer resources
  - **Default Priority:** Nice value of 0
  - **Process Inheritance:** New processes inherit the nice value of their parent process
- Start the process `/bin/slowprocess` with higher priority
  ```bash
    nice -n -10 /bin/slowprocess
  ```
- Start the process `/bin/slowprocess` with lower priority
  ```bash
    nice -n 10 /bin/slowprocess
  ```
- Change the priority of a running process with PID `6996` to a nice value of `20`
  ```bash
    renice 20 6996
  ```
  - The `renice` command sets an **absolute** nice value for a running process.
- Change the priority of a running process using the `top` utility
  1. Start the `top` utility:
  ```bash
    top
  ```
  1. Press the `R` key to enter renice mode.
  2. Enter the PID when prompted with `renice PID [value] to value`.
  3. Enter the desired nice value (between -20 and 19).
  - This method allows interactive priority adjustment without leaving the `top` interface.
  - The display updates to reflect the new priority after the change.

- Understanding `renice` vs `nice`
  - **`renice`:** Changes priority of **already running** processes using **absolute** values.
  - **`nice`:** Sets priority when **starting** a process using **incremental** values.
  - Both commands share the same nice value range (-20 to 19) and privilege restrictions.

- What is a `Zombie Process`?
  - A **zombie process** is one that exhibits problematic behavior:
    - Consumes excessive system resources.
    - Exhibits unusual behavior.
    - Freezes or becomes unresponsive.
  - Zombie processes waste resources that could be allocated to useful processes.
- How many kill signals do the `kill` command have?
  - 64
- What is the syntax of `kill` command?
    ```bash
      kill -signal PID
    ```
- Kill signals reference table
  - **SIGHUP (1):** Hangup signal - stops the process and restarts it with the same PID.
  - **SIGINT (2):** Interrupt signal - weak kill signal, works in most cases but not guaranteed.
  - **SIGQUIT (3):** Core dump - terminates process, saves process information in memory to a file named `core` in the current working directory.
  - **SIGTERM (15):** Termination signal - the default kill signal when no signal is specified. It allows the process to terminate gracefully.
  - **SIGKILL (9):** Absolute kill signal - forces the process to stop by sending resources to `/dev/null`. Cannot be ignored by the process.

- Restart a process with PID `6996`.
  ```bash
    kill -1 6996
  ```
- Forcefully Terminate a process with PID `6996`
  ```bash
    kill -9 6996
  ```
- Default kill (SIGTERM) a process with PID `6996`.
  ```bash
    kill 6996
  ```
  - Sends `SIGTERM (15)` by default.

- Kill a process by name `zombieprocess` instead of PID
  ```bash
    killall -9 zombieprocess
  ```
  - Useful when you don't know the PID.
  - Kills **all** processes matching the specified name.

- Kill a process from within `top`
  - Press `K` while `top` is running.
  - Enter the PID of the process you want to kill.
  - Convenient for real-time process management without leaving `top`.
- Open a file named `newscript` in `l3afpad` in background
  ```bash
    leafpad newscript &
  ```
  - Append `& (amperstand)` to the end of any command to run it in the background.
  - The terminal immediately returns a new prompt for other commands.
- Move a process with PID `1234` to the foreground
  ```bash
    fg 1234
  ```
  - Use `ps` to find the PID if unknown.

- Schedule the script `/root/myscanningscript` to run at 7:20 AM today using the `at` command
  ```bash
    at 7:20am
    at>/root/myscanningscript
  ```
  - After entering the `at` command with a time, it enters interactive mode at the `at>` prompt.
  - Type the command(s) to execute at the scheduled time, then press `Ctrl+D` to submit.
  - This schedules `/root/myscanningscript` to run once at 7:20 AM on the current day.

- Schedule the script `/root/myscanningscript` to run using various `at` time formats
  ```bash
    at 7:20pm June 25
    at>/root/myscanningscript
  ```
  - **Time Formats:**
    - `at 7:20pm` - Runs at 7:20 PM on the current day.
    - `at 7:20pm June 25` - Runs at 7:20 PM on June 25.
    - `at noon` - Runs at noon (12:00 PM) on the current day.
    - `at noon June 25` - Runs at noon on June 25.
    - `at tomorrow` - Runs at the same time tomorrow.
    - `at now + 20 minutes` - Runs 20 minutes from now.
    - `at now + 10 hours` - Runs 10 hours from now.
    - `at now + 5 days` - Runs 5 days from now.
    - `at now + 3 weeks` - Runs 3 weeks from now.
    - `at 7:20pm 06/25/2019` - Runs at 7:20 PM on June 25, 2019.
  - All formats schedule a **one-time** job for future execution via the `at` daemon.

- Understand `at` vs `crond`
  - **`at` daemon:** Schedules a job to run **once** at a specified future time.
  - **`crond` daemon:** Schedules **recurring** tasks (daily, weekly, monthly).