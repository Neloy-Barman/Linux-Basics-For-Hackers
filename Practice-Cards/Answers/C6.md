- View processes running in current terminal session
  ```bash
    ps
  ```
- Give an overview of the columns
    ```
    PID TTY          TIME CMD
    1796 pts/0    00:00:00 zsh
    1856 pts/0    00:00:00 ps
    ```
  - **PID:** Process ID - unique identifier assigned by the kernel to each process sequentially as they are created.
  - **TTY:** Terminal associated with the process.
  - **TIME:** CPU time consumed by the process.
  - **CMD:** Command/name of the process.

- View all processes running on the system for all users
  ```bash
    ps aux
  ```
  - Note: Options are not prefixed with a dash (`-`) and must be lowercase (Linux is case-sensitive).
- Provide an overview of the process columns.
    ```
        USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
        root           1  0.3  0.3  23680 14364 ?        Ss   02:26   0:01 /sbin/init splash
        root           2  0.0  0.0      0     0 ?        S    02:26   0:00 [kthreadd]
    ```
  - **USER:** The user who invoked the process.
  - **PID:** The process ID.
  - **%CPU:** The percent of CPU this process is using.
  - **%MEM:** The percent of memory this process is using.
  - **VSZ (Virtual Memory Size):**
      - Total amount of virtual memory the process is using, measured in kilobytes (KB).
      - Includes all memory the process *can* access:
        - Memory that is swapped out to disk.
        - Memory that is allocated but not yet used.
        - Memory from shared libraries.
      - Does **not** represent actual physical RAM usage.
      - A process can have a large VSZ but use very little physical memory.
      - Example: A process with `202540` VSZ has ~202 MB of virtual address space allocated.
  - **RSS (Resident Set Size):**
      - The portion of memory that is actually held in physical RAM, measured in kilobytes (KB).
      - Represents the **real** memory footprint of the process.
      - Does **not** include:
        - Memory that has been swapped out to disk.
      - Does include:
        - Shared libraries currently loaded in memory (may be shared with other processes).
      - More accurate indicator of actual memory consumption than VSZ.
      - Example: A process with `6396` RSS is using ~6.4 MB of physical RAM.
  - **TTY:** Terminal type (`?` means no terminal attached).
  - **STAT (Process State):**
    - Shows the current state of the process using code letters.
    - **Primary state codes (first character):**
      - `R` -> Running or runnable (actively executing or in run queue).
      - `S` -> Interruptible sleep (waiting for an event, like user input).
      - `D` -> Uninterruptible sleep (usually waiting for I/O operations).
      - `T` -> Stopped (suspended by job control signal or debugger).
      - `Z` -> Zombie (terminated but parent hasn't collected exit status).
      - `I` -> Idle kernel thread.
    - **Additional modifier characters:**
      - `<` -> High priority process (not nice to other processes).
      - `N` -> Low priority process (nice to other processes).
      - `L` -> Has pages locked into memory (cannot be swapped).
      - `s` -> Session leader (controls a group of processes).
      - `l` -> Multi-threaded process.
      - `+` -> In the foreground process group of the terminal.
    - Example: `Ss` means sleeping (`S`) and is a session leader (`s`).
    - Example: `R+` means running (`R`) and in the foreground (`+`).
  - **START:** Time the process started.
  - **TIME:** CPU time consumed.
  - **COMMAND:** The name of the command that started the process.

- Why is the PID more important than the process name?
  - The Linux kernel assigns a unique **PID** to each process sequentially as processes are created.
  - When working with processes in Linux, you often need to specify their PIDs to perform any action on a process.
  - To perform any action on a process, we must specify its PID.
- Start the Metasploit exploitation framework
  ```bash
    msfconsole
  ```
  - Metasploit is the most widely used exploitation framework.
  - Comes pre-installed on Kali Linux.
  - Uses PostgreSQL database as its backend.

- Filter processes by name to find a specific process (e.g., `msfconsole`)
  ```bash
    ps aux | grep msfconsole
  ```
  - **Important notes:**
    - Column headers are **not** displayed because they don't contain the search keyword.
    - The `grep` command itself will appear in the results since it contains the search term.
    - Results maintain the same column format as `ps aux`.

- Understanding filtered process output
    ```bash
        kali       16265 30.3  7.4 1321004 298144 pts/0  Sl+  02:59   0:16 ruby /usr/bin/msfconsole
        kali       16720  0.0  0.0   2684  1652 pts/0    S+   03:00   0:00 sh -c ps aux | grep msfconsole
        kali       16722  0.0  0.0   6532  2292 pts/0    S+   03:00   0:00 grep msfconsole
    ```
  - **Key columns for resource monitoring:**
    - **%CPU (3rd column):** Percentage of CPU the process is consuming.
    - **%MEM (4th column):** Percentage of system memory the process is using.
- Exclude `grep` from the search results
  ```bash
    ps aux | grep msfconsole | grep -v grep
  ```
  - The `-v` option inverts the match, excluding lines containing `grep`.
- Find the most resource-intensive processes (greediest processes)
  ```bash
    top
  ```
  - Unlike `ps` which gives a one-time snapshot, `top` refreshes the list dynamically (default: every 10 seconds).
  - Processes are displayed ordered by resource usage, starting with the largest consumers.
- **Header information displayed:**
    ```
        top - 03:18:14 up 51 min,  1 user,  load average: 0.03, 0.05, 0.09
        Tasks: 163 total,   1 running, 162 sleeping,   0 stopped,   0 zombie
        %Cpu(s):  4.6 us,  3.6 sy,  0.0 ni, 91.6 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st 
        MiB Mem :   3921.9 total,   2319.2 free,    873.2 used,    988.5 buff/cache     
        MiB Swap:    953.7 total,    953.7 free,      0.0 used.   3048.8 avail Mem 
    ```
  - System uptime and number of users logged in.
  - **Tasks:** Total processes and their states (running, sleeping, stopped, zombie).
  - **%Cpu(s):** CPU usage breakdown (`us` = user, `sy` = system, `ni` = nice, `id` = idle, `wa` = wait, `hi` = hardware interrupts, `si` = software interrupts).
  - **KiB Mem:** Physical memory usage (total, free, used, buff/cache).
  - **KiB Swap:** Swap memory usage (total, free, used, available).
- **Process columns:**
    ```bash
      PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                                                                                                                                              
    725 root      20   0  378896 127672  59792 S  11.3   3.2   0:38.83 Xorg                                                                                                                                                                 
   1605 kali      20   0  584784  68812  53532 S   5.0   1.7   0:04.99 qterminal                                                                                                                                                            
   1345 kali      20   0  895700 132308  83680 S   1.3   3.3   0:10.96 xfwm4      
    ```
    - **PID:** Process ID.
    - **USER:** User who owns the process.
    - **PR:** Priority of the process.
    - **NI:** Nice value (affects scheduling priority; lower = higher priority).
    - **VIRT:** Virtual memory used by the process (same as VSZ in `ps`).
    - **RES:** Resident memory (physical RAM used, same as RSS in `ps`).
    - **SHR:** Shared memory size.
    - **S:** Process state (`R` = running, `S` = sleeping, `D` = uninterruptible sleep, `Z` = zombie, `T` = stopped).
    - **%CPU:** Percentage of CPU usage.
    - **%MEM:** Percentage of memory usage.
    - **TIME+:** Total CPU time consumed by the process.
    - **COMMAND:** Name of the command/process.

- Interactive commands while `top` is running
  - `H` or `?` -> Display a list of interactive commands (help).
  - `Q` -> Quit `top`.

- Use case for `top`
  - System administrators often keep `top` running in a terminal to continuously monitor process resource usage.
  - Hackers may use it to monitor multiple tasks running on their system simultaneously.